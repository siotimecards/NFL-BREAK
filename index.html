<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>NFL Break ‚Äì Inscriptions | Siotime</title>

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:#f4f4f4;
  text-align:center;
}

/* ================== BANDEAU SOCIAL ================== */
#social-bar{
  background:#000;
  color:#fff;
  display:flex;
  justify-content:center;
  align-items:center;
  gap:30px;
  padding:12px 20px;
  flex-wrap:wrap;
}

.social-item{
  display:flex;
  align-items:center;
  gap:8px;
  font-size:14px;
  white-space:nowrap;
}

.social-item img{
  width:20px;
  height:20px;
}

@media(max-width:600px){
  #social-bar{ gap:15px }
  .social-item{ font-size:12px }
  .social-item img{ width:16px }
}

/* ================== TITRES ================== */
h1{ margin:20px 0 10px; }
.timer{ color:red; font-weight:bold; }

/* ================== COMPTEUR ================== */
#spotsLeft{
  margin:10px;
  font-weight:bold;
  font-size:18px;
}

.counter-green{ color:green }
.counter-orange{ color:orange }
.counter-red{ color:red }

/* ================== TEAMS ================== */
.teams{
  display:flex;
  flex-wrap:wrap;
  justify-content:center;
  gap:15px;
  margin:20px;
}

.team{
  width:140px;
  padding:10px;
  background:#fff;
  border-radius:12px;
  box-shadow:0 4px 10px rgba(0,0,0,0.1);
  cursor:pointer;
  transition:0.2s;
}

.team:hover{ transform:scale(1.05) }

.team img{ width:70px }

.price{ color:green; font-size:0.9em }

.taken{
  opacity:0.4;
  pointer-events:none;
  background:#ddd;
}

/* ================== ANIMATIONS ================== */
.reserved{
  animation:pop 0.4s ease;
}

@keyframes pop{
  0%{ transform:scale(1) }
  50%{ transform:scale(1.2) }
  100%{ transform:scale(1) }
}

/* DERNIER SPOT */
.last-spot{
  animation:flash 0.6s infinite alternate;
}

@keyframes flash{
  from{ box-shadow:0 0 10px red }
  to{ box-shadow:0 0 30px red }
}

/* ================== FLASH SUCCESS ================== */
.flash{
  position:fixed;
  top:20px;
  left:50%;
  transform:translateX(-50%);
  background:#28a745;
  color:#fff;
  padding:12px 25px;
  border-radius:30px;
  font-weight:bold;
  animation:fade 2s forwards;
  z-index:999;
}

@keyframes fade{
  0%{ opacity:0 }
  20%{ opacity:1 }
  80%{ opacity:1 }
  100%{ opacity:0 }
}

/* ================== RECAP ================== */
#recap{
  max-width:600px;
  margin:30px auto;
  background:#fff;
  padding:15px;
  border-radius:12px;
}
.recap-item{ margin:6px }
</style>
</head>

<body>

<!-- ================== BANDEAU ================== -->
<div id="social-bar">
  <div class="social-item">
    <img src="https://cdn-icons-png.flaticon.com/512/1384/1384060.png">
    <span>YouTube : Siotime</span>
  </div>
  <div class="social-item">
    <img src="https://cdn-icons-png.flaticon.com/512/2111/2111646.png">
    <span>Twitch : SiotimeLive</span>
  </div>
  <div class="social-item">
    <img src="https://cdn-icons-png.flaticon.com/512/733/733579.png">
    <span>X : @SiotimeCards</span>
  </div>
  <div class="social-item">
    <img src="https://cdn-icons-png.flaticon.com/512/1384/1384063.png">
    <span>Instagram : siotime.cards</span>
  </div>
</div>

<h1>üèà NFL Break ‚Äì Siotime</h1>
<div class="timer" id="timer"></div>
<div id="spotsLeft"></div>

<div class="teams" id="teams"></div>

<h2>‚úÖ R√©cap inscrits</h2>
<div id="recap"></div>

<!-- ================== AUDIO ================== -->
<audio id="sound">
  <source src="https://assets.mixkit.co/sfx/preview/mixkit-achievement-bell-600.mp3">
</audio>

<script>
const ENDPOINT = "TON_URL_APPS_SCRIPT_ICI";
const deadline = new Date(2026,1,22,18,0,0);

const teams = [
{ name:"Arizona Cardinals", price:10, logo:"https://a.espncdn.com/i/teamlogos/nfl/500/ari.png" },
{ name:"Atlanta Falcons", price:10, logo:"https://a.espncdn.com/i/teamlogos/nfl/500/atl.png" },
{ name:"Baltimore Ravens", price:15, logo:"https://a.espncdn.com/i/teamlogos/nfl/500/bal.png" },
{ name:"Buffalo Bills", price:15, logo:"https://a.espncdn.com/i/teamlogos/nfl/500/buf.png" },
{ name:"Carolina Panthers", price:8, logo:"https://a.espncdn.com/i/teamlogos/nfl/500/car.png" },
{ name:"Chicago Bears", price:10, logo:"https://a.espncdn.com/i/teamlogos/nfl/500/chi.png" },
{ name:"Cincinnati Bengals", price:14, logo:"https://a.espncdn.com/i/teamlogos/nfl/500/cin.png" },
{ name:"Cleveland Browns", price:10, logo:"https://a.espncdn.com/i/teamlogos/nfl/500/cle.png" },
{ name:"Dallas Cowboys", price:18, logo:"https://a.espncdn.com/i/teamlogos/nfl/500/dal.png" },
{ name:"Denver Broncos", price:9, logo:"https://a.espncdn.com/i/teamlogos/nfl/500/den.png" },
{ name:"Detroit Lions", price:12, logo:"https://a.espncdn.com/i/teamlogos/nfl/500/det.png" },
{ name:"Green Bay Packers", price:14, logo:"https://a.espncdn.com/i/teamlogos/nfl/500/gb.png" },
{ name:"Houston Texans", price:9, logo:"https://a.espncdn.com/i/teamlogos/nfl/500/hou.png" },
{ name:"Indianapolis Colts", price:10, logo:"https://a.espncdn.com/i/teamlogos/nfl/500/ind.png" },
{ name:"Jacksonville Jaguars", price:8, logo:"https://a.espncdn.com/i/teamlogos/nfl/500/jax.png" },
{ name:"Kansas City Chiefs", price:20, logo:"https://a.espncdn.com/i/teamlogos/nfl/500/kc.png" },
{ name:"Las Vegas Raiders", price:12, logo:"https://a.espncdn.com/i/teamlogos/nfl/500/lv.png" },
{ name:"Los Angeles Chargers", price:13, logo:"https://a.espncdn.com/i/teamlogos/nfl/500/lac.png" },
{ name:"Los Angeles Rams", price:14, logo:"https://a.espncdn.com/i/teamlogos/nfl/500/lar.png" },
{ name:"Miami Dolphins", price:14, logo:"https://a.espncdn.com/i/teamlogos/nfl/500/mia.png" },
{ name:"Minnesota Vikings", price:12, logo:"https://a.espncdn.com/i/teamlogos/nfl/500/min.png" },
{ name:"New England Patriots", price:11, logo:"https://a.espncdn.com/i/teamlogos/nfl/500/ne.png" },
{ name:"New Orleans Saints", price:11, logo:"https://a.espncdn.com/i/teamlogos/nfl/500/no.png" },
{ name:"New York Giants", price:10, logo:"https://a.espncdn.com/i/teamlogos/nfl/500/nyg.png" },
{ name:"New York Jets", price:12, logo:"https://a.espncdn.com/i/teamlogos/nfl/500/nyj.png" },
{ name:"Philadelphia Eagles", price:16, logo:"https://a.espncdn.com/i/teamlogos/nfl/500/phi.png" },
{ name:"Pittsburgh Steelers", price:14, logo:"https://a.espncdn.com/i/teamlogos/nfl/500/pit.png" },
{ name:"San Francisco 49ers", price:18, logo:"https://a.espncdn.com/i/teamlogos/nfl/500/sf.png" },
{ name:"Seattle Seahawks", price:13, logo:"https://a.espncdn.com/i/teamlogos/nfl/500/sea.png" },
{ name:"Tampa Bay Buccaneers", price:12, logo:"https://a.espncdn.com/i/teamlogos/nfl/500/tb.png" },
{ name:"Tennessee Titans", price:10, logo:"https://a.espncdn.com/i/teamlogos/nfl/500/ten.png" },
{ name:"Washington Commanders", price:9, logo:"https://a.espncdn.com/i/teamlogos/nfl/500/wsh.png" }
];.map(n=>({
  name:n,
  price:10,
  logo:`https://a.espncdn.com/i/teamlogos/nfl/500/${n.split(" ").pop().slice(0,3).toLowerCase()}.png`
}));

const teamsDiv=document.getElementById("teams");
const recapDiv=document.getElementById("recap");
const timerDiv=document.getElementById("timer");
const sound=document.getElementById("sound");

function flash(msg){
  const d=document.createElement("div");
  d.className="flash";
  d.innerText=msg;
  document.body.appendChild(d);
  setTimeout(()=>d.remove(),2000);
}

function render(taken=[]){
  teamsDiv.innerHTML="";
  const left=teams.length-taken.length;
  const counter=document.getElementById("spotsLeft");

  counter.className = left<=5?"counter-red":left<=10?"counter-orange":"counter-green";
  counter.innerText=`üéüÔ∏è ${left} spots restants sur ${teams.length}`;

  teams.forEach(t=>{
    const d=document.createElement("div");
    const isTaken=taken.includes(t.name);
    d.className="team"+(isTaken?" taken":"");
    if(left===1 && !isTaken) d.classList.add("last-spot");

    d.innerHTML=`<img src="${t.logo}"><p>${t.name}</p><p class="price">${t.price}‚Ç¨</p>`;

    if(!isTaken){
      d.onclick=()=>reserve(t.name,d);
    }
    teamsDiv.appendChild(d);
  });
}

async function reserve(team,el){
  const pseudo=prompt("Pseudo ?");
  if(!pseudo) return;
  const social=prompt("R√©seau social ?");
  if(!social) return;

  const r=await fetch(ENDPOINT,{
    method:"POST",
    body:JSON.stringify({pseudo,social,team})
  });
  const j=await r.json();

  if(j.status==="ok"){
    el.classList.add("reserved","taken");
    sound.play();
    flash("‚úÖ √âquipe r√©serv√©e !");
    load();
  }else{
    alert("D√©j√† prise !");
    load();
  }
}

async function load(){
  const taken=await (await fetch(ENDPOINT+"?mode=taken")).json();
  render(taken);

  const recap=await (await fetch(ENDPOINT+"?mode=recap")).json();
  recapDiv.innerHTML="";
  recap.forEach(r=>{
    recapDiv.innerHTML+=`<div class="recap-item"><b>${r.pseudo}</b> ‚Äì ${r.team}</div>`;
  });
}

function timer(){
  const d=deadline-new Date();
  if(d<=0){ timerDiv.innerText="‚õî Inscriptions ferm√©es"; return }
  const h=Math.floor(d/36e5),m=Math.floor(d/6e4%60),s=Math.floor(d/1e3%60);
  timerDiv.innerText=`‚è≥ Fin dans ${h}h ${m}m ${s}s`;
}

load();
timer();
setInterval(load,15000);
setInterval(timer,1000);
</script>

</body>
</html>
