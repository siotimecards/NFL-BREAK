<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>NFL Break ‚Äì Inscriptions | Siotime</title>

<style>
body { font-family: Arial, sans-serif; text-align:center; background:#fafafa; margin:0 }
h1 { color:#222 }
.timer { font-size:20px; color:red; font-weight:bold; margin:10px }
.teams { display:flex; flex-wrap:wrap; justify-content:center; gap:15px; margin:20px }
.team { width:140px; padding:10px; border:1px solid #ccc; border-radius:12px; background:white; cursor:pointer; transition:0.2s }
.team:hover { background:#f2f2f2; transform:scale(1.05) }
.taken { opacity:0.4; pointer-events:none; background:#ddd }
.team img { width:70px }
.price { color:green; font-size:0.9em }

.counter-green { color:green; }
.counter-orange { color:orange; }
.counter-red { color:red; }

.reserved-animation { animation: pop 0.4s ease forwards; }
@keyframes pop {
  0% { transform: scale(1); }
  50% { transform: scale(1.15); }
  100% { transform: scale(1); }
}

.flash-success {
  position: fixed;
  top: 20px;
  left: 50%;
  transform: translateX(-50%);
  background: #28a745;
  color: white;
  padding: 12px 25px;
  border-radius: 30px;
  font-weight: bold;
  box-shadow: 0 4px 15px rgba(0,0,0,0.2);
  z-index: 9999;
  opacity: 0;
  animation: fadeInOut 2s ease forwards;
}

@keyframes fadeInOut {
  0% { opacity: 0; top: 0px; }
  20% { opacity: 1; top: 20px; }
  80% { opacity: 1; }
  100% { opacity: 0; }
}

.recap-item { display:flex; align-items:center; justify-content:center; gap:10px; margin:5px }
.recap-item img { width:30px }

.section { max-width:800px; margin:40px auto; padding:20px; background:#fff; border-radius:15px; box-shadow:0 4px 10px rgba(0,0,0,0.05) }

.social-bar { background:#000; padding:10px; display:flex; justify-content:center; gap:20px }
.social-bar img { width:32px }
</style>
</head>
<body>

<div class="social-bar">
<a href="https://www.youtube.com/@SioTime" target="_blank"><img src="https://upload.wikimedia.org/wikipedia/commons/0/09/YouTube_full-color_icon_%282017%29.svg"></a>
<a href="https://www.instagram.com/siotime.cards/" target="_blank"><img src="https://upload.wikimedia.org/wikipedia/commons/a/a5/Instagram_icon.png"></a>
<a href="https://x.com/Siotimecards" target="_blank"><img src="https://upload.wikimedia.org/wikipedia/commons/5/53/X_logo_2023_original.svg"></a>
</div>

<h1>üèà Inscriptions NFL Break ‚Äì Siotime</h1>
<div class="timer" id="timer"></div>
<div id="spotsLeft"></div>

<div class="teams" id="teams"></div>

<h2>‚úÖ R√©cap des inscrits</h2>
<div id="recap"></div>

<script>

const ENDPOINT = "https://script.google.com/macros/s/AKfycbxCLG5GaC4nluXa29V9zWYWQraVeFdR7mw-oZeFdPsZXUvRgRlRBVOulKFUA3sZns1e/exec";
const deadline = new Date(2026, 1, 22, 18, 0, 0);

const teams = [
{ name:"Arizona Cardinals", price:10, logo:"https://a.espncdn.com/i/teamlogos/nfl/500/ari.png" },
{ name:"Atlanta Falcons", price:10, logo:"https://a.espncdn.com/i/teamlogos/nfl/500/atl.png" },
{ name:"Baltimore Ravens", price:15, logo:"https://a.espncdn.com/i/teamlogos/nfl/500/bal.png" },
{ name:"Buffalo Bills", price:15, logo:"https://a.espncdn.com/i/teamlogos/nfl/500/buf.png" },
{ name:"Carolina Panthers", price:8, logo:"https://a.espncdn.com/i/teamlogos/nfl/500/car.png" },
{ name:"Chicago Bears", price:10, logo:"https://a.espncdn.com/i/teamlogos/nfl/500/chi.png" },
{ name:"Cincinnati Bengals", price:14, logo:"https://a.espncdn.com/i/teamlogos/nfl/500/cin.png" },
{ name:"Cleveland Browns", price:10, logo:"https://a.espncdn.com/i/teamlogos/nfl/500/cle.png" },
{ name:"Dallas Cowboys", price:18, logo:"https://a.espncdn.com/i/teamlogos/nfl/500/dal.png" },
{ name:"Denver Broncos", price:9, logo:"https://a.espncdn.com/i/teamlogos/nfl/500/den.png" },
{ name:"Detroit Lions", price:12, logo:"https://a.espncdn.com/i/teamlogos/nfl/500/det.png" },
{ name:"Green Bay Packers", price:14, logo:"https://a.espncdn.com/i/teamlogos/nfl/500/gb.png" },
{ name:"Houston Texans", price:9, logo:"https://a.espncdn.com/i/teamlogos/nfl/500/hou.png" },
{ name:"Indianapolis Colts", price:10, logo:"https://a.espncdn.com/i/teamlogos/nfl/500/ind.png" },
{ name:"Jacksonville Jaguars", price:8, logo:"https://a.espncdn.com/i/teamlogos/nfl/500/jax.png" },
{ name:"Kansas City Chiefs", price:20, logo:"https://a.espncdn.com/i/teamlogos/nfl/500/kc.png" },
{ name:"Las Vegas Raiders", price:12, logo:"https://a.espncdn.com/i/teamlogos/nfl/500/lv.png" },
{ name:"Los Angeles Chargers", price:13, logo:"https://a.espncdn.com/i/teamlogos/nfl/500/lac.png" },
{ name:"Los Angeles Rams", price:14, logo:"https://a.espncdn.com/i/teamlogos/nfl/500/lar.png" },
{ name:"Miami Dolphins", price:14, logo:"https://a.espncdn.com/i/teamlogos/nfl/500/mia.png" },
{ name:"Minnesota Vikings", price:12, logo:"https://a.espncdn.com/i/teamlogos/nfl/500/min.png" },
{ name:"New England Patriots", price:11, logo:"https://a.espncdn.com/i/teamlogos/nfl/500/ne.png" },
{ name:"New Orleans Saints", price:11, logo:"https://a.espncdn.com/i/teamlogos/nfl/500/no.png" },
{ name:"New York Giants", price:10, logo:"https://a.espncdn.com/i/teamlogos/nfl/500/nyg.png" },
{ name:"New York Jets", price:12, logo:"https://a.espncdn.com/i/teamlogos/nfl/500/nyj.png" },
{ name:"Philadelphia Eagles", price:16, logo:"https://a.espncdn.com/i/teamlogos/nfl/500/phi.png" },
{ name:"Pittsburgh Steelers", price:14, logo:"https://a.espncdn.com/i/teamlogos/nfl/500/pit.png" },
{ name:"San Francisco 49ers", price:18, logo:"https://a.espncdn.com/i/teamlogos/nfl/500/sf.png" },
{ name:"Seattle Seahawks", price:13, logo:"https://a.espncdn.com/i/teamlogos/nfl/500/sea.png" },
{ name:"Tampa Bay Buccaneers", price:12, logo:"https://a.espncdn.com/i/teamlogos/nfl/500/tb.png" },
{ name:"Tennessee Titans", price:10, logo:"https://a.espncdn.com/i/teamlogos/nfl/500/ten.png" },
{ name:"Washington Commanders", price:9, logo:"https://a.espncdn.com/i/teamlogos/nfl/500/wsh.png" }
];


const teamsDiv = document.getElementById("teams");
const recapDiv = document.getElementById("recap");
const timerDiv = document.getElementById("timer");

function renderTeams(taken=[]) {
  teamsDiv.innerHTML="";
  let takenCount = 0;

  teams.forEach(t=>{
    const d=document.createElement("div");
    const isTaken = Array.isArray(taken) && taken.includes(t.name);

    if(isTaken) takenCount++;

    d.className="team"+(isTaken?" taken":"");
    d.innerHTML=`<img src="${t.logo}"><p>${t.name}</p><p class="price">${t.price}‚Ç¨</p>`;

    if(!isTaken){
      d.onclick=()=>selectTeam(t,d);
    }

    teamsDiv.appendChild(d);
  });

  updateCounter(takenCount);
}

function updateCounter(takenCount){
  const total = teams.length;
  const left = total - takenCount;
  const counter = document.getElementById("spotsLeft");

  let colorClass = "counter-green";
  if(left <= 5) colorClass = "counter-red";
  else if(left <= 10) colorClass = "counter-orange";

  counter.className = colorClass;
  counter.innerHTML = `üéüÔ∏è ${left} spots restants sur ${total}`;
}

function showSuccess(message){
  const flash = document.createElement("div");
  flash.className="flash-success";
  flash.innerText=message;
  document.body.appendChild(flash);
  setTimeout(()=>flash.remove(),2000);
}

async function selectTeam(team, element){
  const pseudo=prompt("Pseudo :");
  if(!pseudo) return;

  const social=prompt("R√©seau social :");
  if(!social) return;

  if(!confirm(`Confirmer ${team.name} (${team.price}‚Ç¨)`)) return;

  const r=await fetch(ENDPOINT,{method:"POST",body:JSON.stringify({pseudo,social,team:team.name})});
  const j=await r.json();

  if(j.status==="ok"){
    element.classList.add("reserved-animation");
    element.classList.add("taken");
    showSuccess("‚úÖ √âquipe r√©serv√©e !");
    loadData();
  } else {
    alert("√âquipe d√©j√† prise !");
    loadData();
  }
}

async function loadData(){
  const t=await (await fetch(ENDPOINT+"?mode=taken")).json();
  renderTeams(t);

  const r=await (await fetch(ENDPOINT+"?mode=recap")).json();
  recapDiv.innerHTML="";
  r.forEach(e=>{
    recapDiv.innerHTML+=`<div class="recap-item"><b>${e.pseudo}</b> (${e.team})</div>`;
  });
}

function updateTimer(){
  const diff=deadline-new Date();
  if(diff<=0){timerDiv.innerHTML="‚õî Inscriptions ferm√©es";return;}
  const h=Math.floor(diff/36e5),m=Math.floor(diff/6e4%60),s=Math.floor(diff/1e3%60);
  timerDiv.innerHTML=`‚è≥ Fin dans ${h}h ${m}m ${s}s`;
}

loadData();
updateTimer();
setInterval(loadData,15000);
setInterval(updateTimer,1000);

</script>
</body>
</html>
